<?php include_once("inc/head.php"); error_reporting(0); /*setcookie("user_id", "1", time() - 3600*24);*/ ?><?php// signup functionif( isset($_POST['signup']) ){	$firstname 		= $_POST['firstname'];	$lastname 		= $_POST['lastname'];    $title 		    = $_POST['title'];    $branch 	    = $_POST['branch'];    $company 		= $_POST['company'];	$email 			= $_POST['email'];	$password 		= $_POST['password'];	$passwordConfirm = $_POST['passwordConfirm'];	// push errors into this array	$errors = array();	if( empty($firstname) )	{		$errors[] = "Adınınızı Giriniz";	}	if( empty($lastname) )	{		$errors[] = "Soyadınızı Girin";	}	if( empty($password) || mb_strlen($password, 'UTF-8') < 6 )	{		$errors[] = "Şifre en az 6 karakterden oluşmalıdır";	}	if($password != $passwordConfirm)	{		$errors[] = "Parola Eşleşmiyor";	}	if( empty($email) || !filter_var($email, FILTER_VALIDATE_EMAIL))	{		$errors[] = "Geçerli bir e-posta giriniz";	}    else {        $email_avaliable = $db->prepare("SELECT email FROM gwp_users WHERE email = :email");        $email_avaliable->bindValue(':email', $email);        $email_avaliable->execute();        if($email_avaliable->rowCount() != 0)        {            $errors[] = "Bu Email Adresi Kullanılmakadır";        }    }	if( !empty($errors) )	{		$signup_result = '';		foreach ($errors as $error) {			$signup_result .= $error."<br />";		}	}	else	{		$password 		= md5($password);		$query = $db->prepare("INSERT INTO gwp_users							SET `type` = :type,								name = :name,								surname = :surname,								email = :email,								password = :password,								level = :level,								usertitle = :usertitle,								userbranch = :userbranch,								company = :company");		$query->bindValue(":type", 'user');		$query->bindValue(":name", $firstname);		$query->bindValue(":surname", $lastname);		$query->bindValue(":email", $email);		$query->bindValue(":password", $password);		$query->bindValue(":level", "2");		$query->bindValue(":usertitle", $title);        $query->bindValue(":userbranch", $branch);        $query->bindValue(":company", $company);		$done = $query->execute();		if($done)		{			$last_inserted = $db->lastInsertId();			setcookie("user_id", $last_inserted, time()+3600*24);			$signup_result.= $_COOKIE['user_id'];			$insert = $db->query("INSERT INTO `gwp_user_meta` 						SET `post_id` 	= '$last_inserted', 							`group` 	= 'instant_follow',							`key` 		= 'instant_follow',							`val_1` 	= '3',							`val_int` 	= '3'");			header("location: ./");			$signup_result .= "giriş yapıldı";					}		else		{			$signup_result .= "Bilinmeyen bir hata oluştu.<br />Lütfen tekrar deneyin";		}	}}//login functionif( isset($_POST['login']) ){	$email = $_POST['login_email'];	$password = md5($_POST['login_password']);	// push errors into this array	$errors = array();	if( empty($email) || empty($password) )	{		$errors[] = "Lütfen email ve şifrenizi giriniz";	}	if(!empty($errors))	{		foreach ($errors as $error) {			$result .= $error;		}	}	else	{		$query = $db->prepare("SELECT id, email, password FROM gwp_users WHERE email = :email AND password = :password");		$query->bindValue(':email', $email);		$query->bindValue(':password', $password);		$query->execute();		if( $query->rowCount() == 1 )		{			$obj = $query->fetch();			setcookie("user_id", $obj->id, time()+3600*24);			header("location: ./");		}		else		{			$result .= "E-posta adresiniz veya şifreniz hatalı";		}	}}include_once("wall.php");if( isset($_COOKIE['user_id']) ){	//include_once("wall.php");}else{	//include_once("login.php");}?>